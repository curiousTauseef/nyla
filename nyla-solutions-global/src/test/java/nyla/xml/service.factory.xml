<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	<bean id="solutions.global.patterns.scripting.Scripting" class="solutions.global.patterns.scripting.SpringFramework">
	</bean>
   <!-- =================================================== -->
   	<bean id="solutions.global.patterns.decorator.ScriptingText" class="solutions.global.patterns.decorator.ScriptingText">
	     <property name="expression" value="${new java.text.SimpleDateFormat('MM/dd/yyyy').format(T(solutions.global.util.Scheduler).toDateDayOfWeek( T(java.util.Calendar).SUNDAY))}"/>
	     <property name="scripting">
	        <ref bean="solutions.global.patterns.scripting.Scripting"/>
	     </property>
	</bean>
	<bean id="todayText" class="solutions.global.patterns.decorator.ScriptingText">
	     <property name="expression" value="${new java.text.SimpleDateFormat('MM/dd/yyyy').format(T(java.util.Calendar).getInstance().getTime())}"/>
	     <property name="scripting">
	        <ref bean="solutions.global.patterns.scripting.Scripting"/>
	     </property>
	</bean>
	<bean id="mapText" class="org.solutions.data.BridgeMap">
		<property name="map">			      	
			      	<map>
		   				<entry>
			      			<key><value>title</value></key>
			      			<ref bean="titleHtmlText"/>
		   				</entry>
		   				<entry>
			      			<key><value>headers</value></key>
			      			<ref bean="h1sHtmlText"/>
		   				</entry>
		   				<entry>
			      			<key><value>description</value></key>
			      			<ref bean="descriptionHtmlText"/>
		   				</entry>
		   				<entry>
			      			<key><value>keywords</value></key>
			      			<ref bean="keywordsHtmlText"/>
		   				</entry>		   				
					</map>
		</property>
	</bean>
   <bean id="titleHtmlText" class="org.solutions.patterns.decorator.w3cdom.FirstNodeValueByNameCacheText">
   		<property name="name" value="title"/>   		
   </bean>
   <bean id="descriptionHtmlText" class="org.solutions.patterns.decorator.w3cdom.XmlCacheXPathText">
   		<property name="xpath" value="//meta[@name='description']/../[@content]"/>   		
   </bean>
   <bean id="keywordsHtmlText" class="org.solutions.patterns.decorator.w3cdom.XmlCacheXPathText">
   		<property name="xpath" value="//meta[@name='keywords']/../[@content]"/>   		
   </bean>
   <bean id="h1sHtmlText" class="org.solutions.patterns.decorator.w3cdom.AllNodeValueByNameCacheText">
   		<property name="name" value="h1"/>   		
   </bean>
   	<bean id="org.solutions.patterns.creational.builder.mapped.MapFactoryById" class="org.solutions.patterns.creational.builder.mapped.ReLookupTextMapFactory" singleton="true">
   		<property name="lookupTable">
		   <map>
		   		<entry>
			      <key><value>.*</value></key>
			      <ref bean="mapText"/>
		   		</entry>
			</map>
		</property>
	</bean>
 </beans>